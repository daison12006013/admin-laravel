<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Laravel Admin by daison12006013</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Laravel Admin</h1>
        <p>Tired of dealing with your own custom admin panel? Here comes the Package, it makes everything so easy!</p>

        <p class="view"><a href="https://github.com/daison12006013/admin-laravel">View the Project on GitHub <small>daison12006013/admin-laravel</small></a></p>


        <ul>
          <li><a href="https://github.com/daison12006013/admin-laravel/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/daison12006013/admin-laravel/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/daison12006013/admin-laravel">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h1>
<a id="laravel-admin" class="anchor" href="#laravel-admin" aria-hidden="true"><span class="octicon octicon-link"></span></a>Laravel Admin</h1>

<p>I'm still keep on updating this admin package, when you are using the <code>dev-master</code> you will see some sample routes and navigation links, those are my examples to test all the functionality of this package. Each release has a branch and you need to switch for the said branch you used for specific README file.</p>

<p>Anyhow, I'm using this <a href="http://www.blacktie.co/demo/dashgumfree/"></a><a href="http://www.blacktie.co/demo/dashgumfree/">http://www.blacktie.co/demo/dashgumfree/</a> as my  base template, so try to review the design, later on I'll be importing other admin templates that you can use. Thumbs Up!</p>

<h1>
<a id="start-up" class="anchor" href="#start-up" aria-hidden="true"><span class="octicon octicon-link"></span></a>Start Up</h1>

<p>Include this to your composer, if you want the most updated branch, use <code>dev-master</code></p>

<pre><code>    "require": {
        "daison/admin-laravel": "1.0.0"
    }
</code></pre>

<p><br>
Update your composer</p>

<pre><code>    composer update
</code></pre>

<p><br>
Go to <b>/app/config/app.php</b> and add this line</p>

<pre><code>    'Daison\Admin\AdminServiceProvider',
</code></pre>

<p><br>
Go to your command line and publish the config, view and assets</p>

<pre><code>    php artisan config:publish daison/admin-laravel
    php artisan view:publish daison/admin-laravel
    php artisan asset:publish daison/admin-laravel --path="vendor/daison/admin-laravel/src/assets"
</code></pre>

<p><br>
Setup your database and laravel configuration, and run the package migrations</p>

<pre><code>    php artisan migrate --package="daison/admin-laravel"
</code></pre>

<p>Or if you have an existing Users table then use publish</p>

<pre><code>    php artisan migrate:publish daison/admin-laravel
</code></pre>

<h1>
<a id="pre-testing" class="anchor" href="#pre-testing" aria-hidden="true"><span class="octicon octicon-link"></span></a>Pre-Testing</h1>

<p>Go to your browser <b>localhost:8080/admin</b>
  You can now access the admin login page</p>

<p>Go to your command line, and lets create an account to test this admin panel</p>

<pre><code>    php artisan tinker
    &gt; $user = new User;
    &gt; $user-&gt;email = "email@gmail.com";
    &gt; $user-&gt;password = Hash::make('abcd');
    &gt; $user-&gt;save();
    &gt; $role = new Role;
    &gt; $role-&gt;name = 'superuser';
    &gt; $role-&gt;save();
    &gt; $user_role = new UserHasRole;
    &gt; $user_role-&gt;user_id = $user-&gt;id;
    &gt; $user_role-&gt;role_id = $role-&gt;id;
    &gt; $user_role-&gt;save();
</code></pre>

<p>Go back to the page, and log your recently created account.</p>

<p>Tadda! Now you can see the navigation bar, the site name, and even the logout button, let's move to configuration.</p>

<h1>
<a id="configuration" class="anchor" href="#configuration" aria-hidden="true"><span class="octicon octicon-link"></span></a>Configuration</h1>

<p>Remember we used this command <b>php artisan config:publish daison/admin-laravel</b>
Go to /app/config/packages/daison/admin-laravel/ folder
you can see these files
  </p><ul>
    <li>lang
      <ul>
        <li>en.php</li>
      </ul>
    </li>
    <li>general.php</li>
    <li>navigations.php</li>
    <li>routes.php</li>
  </ul>

<h4>
<a id="navigation" class="anchor" href="#navigation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Navigation</h4>

<p>Lets create our sample navigation,</p>

<pre><code>    [name] =&gt; [
      'name' =&gt; 'Navigation Name',
      'icon' =&gt; 'fa fa-home fa-fv',
      'url'  =&gt; '/admin/sample',
      'items'=&gt; [
          [name] =&gt; [
              'name' =&gt; 'Second Level Nav Name',
              'icon  =&gt; '',
              'url'  =&gt; '/admin/sample/1',
          ],
          [name] =&gt; [
              'name' =&gt; 'Second Level Nav Name',
              'icon  =&gt; '',
              'url'  =&gt; '/admin/sample/2',
          ],
      ],
    ],
</code></pre>

<p>After creating these links with [items], refresh your page and see changes. You can even use <code>'roles' =&gt; ['superuser']</code> to limit the view access.</p>

<h4>
<a id="routes" class="anchor" href="#routes" aria-hidden="true"><span class="octicon octicon-link"></span></a>Routes</h4>

<p>Based from our navigation links, we need to create a route to assign the controller to work with. You can also use the original routes file from /app/config/routes.php, but I suggest to use this approach to separate your original routes from admin routes.</p>

<pre><code>  'admin_sample_get' =&gt; [
    'process' =&gt; 'get',
    'url'     =&gt; '/admin/sample/',
    'uses'    =&gt; 'SampleController@showSample',
  ],
  'admin_sample_post' =&gt; [
    'process' =&gt; 'post',
    'url'     =&gt; '/admin/sample/',
    'uses'    =&gt; 'SampleController@saveSample',
  ],
  'admin_sample_rest_get' =&gt; [
    'process' =&gt; 'get',
    'url'     =&gt; '/admin/inventory/{id}/edit',
    'uses'    =&gt; 'InventoryController@showEditItem',
  ],
  'admin_sample_rest_post' =&gt; [
    'process' =&gt; 'post',
    'url'     =&gt; '/admin/inventory/{id}/edit',
    'uses'    =&gt; 'InventoryController@updateItem',
  ],
</code></pre>

<p>Now create your SampleController / InventoryController and it's up to you to handle the responses. You can even assign <code>'roles' =&gt; ['superuser']</code> to restrict each request, you can also provide <code>'is_auth' =&gt; true</code> to redirect guest to the login page.</p>

<h4>
<a id="still-using-main-routes" class="anchor" href="#still-using-main-routes" aria-hidden="true"><span class="octicon octicon-link"></span></a>Still using Main Routes</h4>

<p>So you still want to use the main <code>app/routes.php</code>, however you want to use the roles management to your routes.
Go to your controller <code>__construct</code> and do the constructor injection.</p>

<pre><code>  use Daison\Admin\Admin;

  class MyController
  {
    private $admin;
    public function __construct(Admin $admin)
    {
      $this-&gt;admin = $admin;
    }

    public function showProfile()
    {
      if ($this-&gt;admin-&gt;hasAnAccess(['superuser','agent']) == false) {
        // It means the Authenticated user doesn't have roles
        // Redirect the user, show the access not allowed page... and so on..
      }
    }

    public function saveProfile()
    {
      // same thing as the showProfile() method.
    }
  }
</code></pre>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/daison12006013">daison12006013</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
    
  </body>
</html>